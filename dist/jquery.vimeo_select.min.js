/*! Vimeoselect - v0.1.0 - 2012-12-15
* https://github.com/Jpunt/VimeoSelect
* Copyright (c) 2012 Jasper Haggenburg; Licensed MIT */
(function(e){"use strict";e.vimeo_select=function(t,n,r){var i=this;i.$input=e(t),i.$input.data("vimeo_select",i),i.options=e.extend({},e.vimeo_select.defaultOptions,r),i.user_id=n;if(!n)return window.console.log("No user_id given"),!1;i.init=function(){i.$container=e('<div class="vs-container '+i.options.thumbnail_size+'" />'),i.$input.after(i.$container),i.$close=e('<a href="#" class="vs-close">x</a>'),i.$container.append(i.$close),i.$close.click(function(e){e.preventDefault(),i.hide()}),i.$videos=e('<div class="vs-videos" />'),i.$container.append(i.$videos),i.$input.focus(i.show),i.options.hide_on_blur===!0&&i.$input.blur(i.hide),e(".vs-container .vs-videos .vs-video").live("click",function(t){i.select(e(t.currentTarget))}),i.load()},i.load=function(){e.ajax({url:i.options.api_url+i.user_id+"/videos.json",dataType:"jsonp",success:i.setVideos,complete:function(e,t){e.status!==200&&i.showError()}})},i.setVideos=function(t){var n="";e.each(t,function(e,r){n+='<div class="vs-video '+(e===t.length?"last":"")+'"',n+=' data-id="'+r.id+'" data-thumbnail="'+r.thumbnail_large+'">',n+='<img class="vs-thumbnail" src="'+r["thumbnail_"+i.options.thumbnail_size]+'" alt="thumbnail" />',n+='<p class="vs-video-title">'+r.title+"</p>",n+="</div>"}),i.$videos.html(n)},i.showError=function(){window.alert("could not load videos")},i.select=function(e){i.$videos.find(".vs-video").removeClass("selected"),e.addClass("selected"),i.$input.val(e.data("id")),i.options.remote_thumbnail_input!==!1&&i.options.remote_thumbnail_input.val(e.data("thumbnail")),i.hide()},i.show=function(){i.$container.slideDown(150)},i.hide=function(){i.$container.slideUp(100)},i.init()},e.vimeo_select.defaultOptions={api_url:"http://vimeo.com/api/v2/",thumbnail_size:"medium",hide_on_blur:!0,remote_thumbnail_input:!1},e.fn.vimeo_select=function(t,n){return this.each(function(){new e.vimeo_select(this,t,n)})}})(jQuery);