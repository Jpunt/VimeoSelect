/*! Vimeoselect - v0.1.0 - 2012-12-15
* https://github.com/Jpunt/VimeoSelect
* Copyright (c) 2012 Jasper Haggenburg; Licensed MIT */
(function(e){"use strict";e.fn.vimeo_select=function(t,n){if(!t)return window.alert("No user_id given"),!1;var r={api_url:"http://vimeo.com/api/v2/",thumbnail_size:"medium",hide_on_blur:!0,remote_thumbnail_input:!1,show:function(){}},i=this;return i.settings=e.extend(r,n),i.user_id=t,i.$input=e(this),i.init=function(){i.$container=e("<div></div>").addClass("vs-container").addClass(i.settings.thumbnail_size).hide(),i.$input.after(i.$container),i.$close=e('<a href="#">x</a>').addClass("vs-close"),i.$container.append(i.$close),i.$container.find(".vs-close").click(function(e){e.preventDefault(),i.hide()}),i.$header=e("<div></div>").addClass("vs-header"),i.$container.append(i.$header),i.$videos=e("<div></div>").addClass("vs-videos"),i.$container.append(i.$videos),i.$input.focus(i.show),i.settings.hide_on_blur===!0&&i.$input.blur(i.hide),i.load()},i.load=function(){e.ajax({url:i.settings.api_url+i.user_id+"/videos.json",dataType:"jsonp",success:function(t){e.each(t,function(t,n){var r=e("<div></div>").addClass("vs-video").click(function(t){i.select(e(t.currentTarget),n)});i.$videos.append(r),e('<img alt="thumbnail" />').attr("src",n["thumbnail_"+i.settings.thumbnail_size]).addClass("vs-thumbnail").appendTo(r),e("<p>"+n.title+"</p>").addClass("vs-title").appendTo(r)}),i.$videos.find(".vs-video:last").addClass("last")},complete:function(e,t){e.status!==200&&i.$videos.hide()}})},i.select=function(e,t){i.$videos.find(".vs-video").removeClass("selected"),e.addClass("selected"),i.$input.val(t.id),i.settings.remote_thumbnail_input!==!1&&i.settings.remote_thumbnail_input.val(t.thumbnail_large)},i.show=function(){i.$container.slideDown(150),i.settings.show()},i.hide=function(){i.$container.slideUp(100)},i.init(),i}})(jQuery);